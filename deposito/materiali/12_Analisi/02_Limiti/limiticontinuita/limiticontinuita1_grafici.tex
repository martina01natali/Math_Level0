% (c) 2016 Daniele Zambelli - daniele.zambelli@gmail.com

\newcommand{\xbar}[7]{
  % example:
  % \disegno{\xbar{0.7}{1.5}{a_1}{gray!50}{blue!50!black}{red}{0}}
  \def \x{#1}
  \def \y{#2}
  \def \lx{#3}
  \def \colorline{#4}
  \def \colorpoint{#5}
  \def \colorlabel{#6}
  \def \lbelow{#7}
  \draw [dotted, \colorline]
        (\x, 0) node [\colorlabel, below=\lbelow] {\(\lx\)} -- (\x, \y);
  \filldraw (\x, \y) [\colorpoint] circle(1.5pt);
}

\def \puntipartizionen{4.17, 5.66, 5.89, 5.28, 4.25, 3.22, 2.61, 2.84, 4.33}
\def \puntipartizionevuoti{(4, 4.88), (7, 2.19)}

\newcommand{\partizionen}{% Valutazione di f in alcuni punti con n fissato
  \def \fa{.07*x*x*x-1.05*x*x+4.15*x+1}
  \def \mix{0}
  \def \max{10}
  \def \miy{0}
  \def \may{8}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:\max+.3, ultra thick, green!50!black] {\fa}
    \foreach \yp [count = \xp] in \puntipartizionen{
      \xbar{\xp}{\yp}{x_\xp}
            {white!30!black}{blue!50!black}{blue!50!black}{0}};
  }
}

\newcommand{\puntigrafico}{% Solo i punti evidenziati nel grafico precedente
  \def \fa{.07*x*x*x-1.05*x*x+4.15*x+1}
  \def \mix{0}
  \def \max{10}
  \def \miy{0}
  \def \may{8}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
%     \tkzFct[domain=\mix-0.3:\max+.3, ultra thick, brown!50!black] {\fa}
    \foreach \yp [count = \xp] in \puntipartizionen{
      \xbar{\xp}{\yp}{x_\xp}
            {white!30!black}{blue!50!black}{blue!50!black}{0}};
  }
}

\newcommand{\graficodiscontinuo}{% 
  \def \fa{-0.62*x*x+3.34*x+1.46}
  \def \fb{-1.03*x+9.4}
  \def \fc{1/(-(1.65*(x-3.65)+0.66)+10)+2.35}
  \def \mix{0}
  \def \max{10}
  \def \miy{0}
  \def \may{8}
  \def \xdisca{4}
  \def \xdiscb{7}
  \def \asint{9.25}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope} [ultra thick, green!50!black]
      \tkzFct[domain=\mix-0.3:\xdisca] {\fa}
      \tkzFct[domain=\xdisca:\xdiscb] {\fb}
      \tkzFct[domain=\xdiscb:\asint] {\fc}
      \tkzFct[domain=\asint+0.1:\max+0.3] {\fc}
    \end{scope}
    \foreach \yp [count = \xp] in \puntipartizionen{
      \xbar{\xp}{\yp}{x_\xp}
            {white!30!black}{blue!50!black}{blue!50!black}{0}};
    \foreach \punto in \puntipartizionevuoti{
      \filldraw \punto [fill=white] circle(1.5pt);}
  }
}

\newcommand{\contprimo}{%
  \def \fa{-\x*\x+0*x+5}
  \def \fm{-2*\x+13}
  \def \mi{-2}
  \def \ma{6}
  \def \xc{1}
  \def \yc{4}
  \def \xdma{1.65}
  \def \ydma{3.7}
  \def \xdmb{2.9}
  \def \ydmb{1.22}
  \disegno{
    \rcom{\mi}{\ma}{0}{+8}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mi-0.3,xmax=\ma+0.3,ymin=-0.3,ymax=+8.3]
    \tkzFct[domain=\mi-0.3:\ma+0.3, ultra thick, green!50!black] {\fa}
    \draw [thin, dashed, black] 
          (0, \yc) node [left] {\footnotesize \(\approx \quad ~\)} 
          node [above left] {\footnotesize \(f(\xc) \quad\)} 
          node [below left] {\footnotesize \(f(\xc + \epsilon)\)} -- 
          (\xc, \yc) -- (\xc, 0) 
          node [below] {\footnotesize \(\xc \approx \xc + \epsilon\)};
    \filldraw (\xc, \yc) [green!50!black] circle(1.5pt);
    \microscopio{(\xc, \yc)}{1}{40}{230}{2}{(\xc+4, \yc+3.8)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xc+1.46:\xc+3.22, ultra thick, green!50!black] {\fm}
    \draw [thin, dashed, black] (\xc + 1, \yc + \ydma) 
          node [left=-3pt] {\footnotesize \(f(\xc)\)} -- 
          (\xc + \xdma, \yc + \ydma) -- (\xc + \xdma, \yc + 0.3) 
          node [below ] {\footnotesize \(\xc\)};
    \filldraw (\xc + \xdma, \yc + \ydma) [green!50!black] circle(1.5pt);
    \draw [thin, dashed, black] (\xc + 1, \yc + \ydmb) 
          node [left=-3pt] {\footnotesize \(f(\xc + \epsilon)\)} -- 
          (\xc + \xdmb, \yc + \ydmb) -- (\xc + \xdmb, \yc + 0.3) 
          node [below] {\footnotesize \(\xc + \epsilon\)};
    \filldraw (\xc + \xdmb, \yc + \ydmb) [green!50!black] circle(1.5pt);
  }
}

\newcommand{\contsecondo}{%
  \def \fa{abs(x)/x}
  \def \mix{-2}
  \def \max{+2}
  \def \miy{-1.}
  \def \may{+1.}
  \disegno[10]{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:0, ultra thick, green!50!black] {\fa}
    \tkzFct[domain=0:\max+0.3, ultra thick, green!50!black] {\fa}
    \filldraw [green!50!black, fill= white] 
      (0, -1) circle(1.5pt) (0, +1) circle(1.5pt);
  }
}

\newcommand{\fsegno}{%
  \def \fa{abs(x)/x}
  \def \mix{-2}
  \def \max{+2}
  \def \miy{-1.}
  \def \may{+1.}
  \disegno[10]{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:0, ultra thick, green!50!black] {\fa}
    \tkzFct[domain=0:\max+0.3, ultra thick, green!50!black] {\fa}
    \filldraw (0, -1) [green!50!black, fill= white] circle(1.5pt);
    \filldraw (0, +1) [green!50!black, fill= white] circle(1.5pt);
    \filldraw (0, 0) [green!50!black] circle(1.5pt);
    \microscopio{(0, 0)}{.5}{20}{210}{1}{(+2, +1.7)}
                {\footnotesize \(\times \infty\)}
    \filldraw (1.4, 0.7) [green!50!black] circle(1.5pt)
      node [below, black] {\(0\)} node [left, black] {\(f(0)\)};
    \microscopio{(0, +1)}{.5}{+180}{20}{1}{(-2, +1.7)}
                {\footnotesize \(\times \infty\)}
    \draw [ultra thick, green!50!black] (-1.5, +0.7) 
      node [below, black] {\(0\)} -- (-0.44, +0.7); 
    \filldraw (-1.5, +0.7) [green!50!black, fill= white] circle(1.5pt);
    \microscopio{(0, -1)}{.5}{-30}{160}{1}{(+2.2, -2.5)}
                {\footnotesize \(\times \infty\)}
    \draw [ultra thick, green!50!black] (1.4, -1.7) 
      node [below, black] {\(0\)} -- (0.38, -1.7); 
    \filldraw (1.4, -1.7) [green!50!black, fill= white] circle(1.5pt);
  }
}

\newcommand{\contterzo}{%
  \def \fa{abs(x)/4}
  \def \fb{abs(x-1.2)/4+2.4}
  \def \mix{-4}
  \def \max{+4}
  \def \miy{-1}
  \def \may{+4}
  \def \xc{0}
  \def \yc{0}
  \def \xdma{1.65}
  \def \ydma{3.7}
  \def \xdmb{2.9}
  \def \ydmb{1.22}
  \disegno{
   \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=-0.3+\mix, xmax=4.3,ymin=-1-0.3,ymax=+4+0.3]
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, red!50!black] {\fa}
    \microscopio{(\xc, \yc)}{1}{60}{250}{2}{(\xc+3, \yc+4.4)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=-0.8:+3.18, ultra thick, green!50!black] {\fb}
    \draw [thin, dashed, black] (1.2, 2.4) 
          node [below] {\(0\)} -- (-0.8, 2.4) 
          node [left] {\(f(0)\)};
  }
}

\newcommand{\continuitagraficoa}{%
  \def \xc{2}
  \def \yc{-1}
  \disegno{
    \rcom{-3}{+7}{-3}{+5}{gray!50, very thin, step=1}
    \tkzInit[xmin=-3.3,xmax=+7.3,ymin=-3.3,ymax=+5.3]
    \tkzFct[domain=-3.3:2, ultra thick, color=green!50!black]
         {.5*x - 2}
    \tkzFct[domain=2:+7.3, ultra thick, color=green!50!black]
         {x**2-6*x+7}
    \filldraw (\xc, \yc) [green!50!black] circle(1.5pt);
    \microscopio{(\xc, \yc)}{1}{100}{290}{2}{(+2.4, +3.8)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=-0.73:+1.04, ultra thick, color=green!50!black]
         {.5*x + 1.5}
    \tkzFct[domain=+1.:+1.97, ultra thick, color=green!50!black]
         {-2*x + 4}
    \draw [thin, dashed, black] (-0.8, 2) 
          node [left] {\(f(\xc)\)} -- 
          (1, 2) -- (1, - 0.1) 
          node [below ] {\(\xc\)};
    \filldraw (\xc - 1, \yc + 3) [green!50!black] circle(1.5pt);
  }
}

\newcommand{\contsecondoa}{%
  \def \fa{abs(x)/x}
  \def \mix{-2}
  \def \max{+2}
  \def \miy{-1.}
  \def \may{+1.}
  \disegno[10]{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:0, ultra thick, green!50!black] {\fa}
    \tkzFct[domain=0:\max+0.3, ultra thick, green!50!black] {\fa}
    \filldraw [green!50!black, fill= white] 
      (0, -1) circle(1.5pt) (0, +1) circle(1.5pt);
    \node at (1, -0.5) {\(y = \dfrac{\abs{x}}{x}\)};
  }
}

\newcommand{\contrad}{%
  \def \fa{sqrt(x)}
  \def \mix{-4}
  \def \max{+4}
  \def \miy{-4}
  \def \may{+4}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=0:\max+0.3, ultra thick, green!50!black] {\fa}
    \node at (1.5, -1.5) {\(y = \sqrt{x}\)};
  }
}

\newcommand{\contip}{%
  \def \fa{1./x}
  \def \mix{-4}
  \def \max{+4}
  \def \miy{-4}
  \def \may{+4}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:-0.2, ultra thick, green!50!black] {\fa}
    \tkzFct[domain=+0.2:\max+0.3, ultra thick, green!50!black] {\fa}
    \node at (1.5, -1.5) {\(y = \dfrac{1}{x}\)};
  }
}

\newcommand{\continuitafcostante}{%
  \def \fa{+2.5}
  \def \fam{+5.3}
  \def \mix{0}
  \def \max{8}
  \def \miy{0}
  \def \may{7}
  \def \xp{3.5}
  \def \yp{2.5}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, green!50!black] {\fa}
    \node at (-.5, 3.5) [black] {\(k\)};
    \microscopio{(\xp, \yp)}{1}{60}{250}{2}{(\xp+3, \yp+4.4)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xp-0.8:\xp+3.15, ultra thick, green!50!black] {\fam}
  }
}

\newcommand{\continuitafidentica}{%
  \def \fa{x}
  \def \fam{x-4}
  \def \mix{0}
  \def \max{8}
  \def \miy{0}
  \def \may{7}
  \def \xp{3.5}
  \def \yp{3.5}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, green!50!black] {\fa}
    \microscopio{(\xp, \yp)}{1}{-60}{-200}{2}{(\xp+4.4, \yp-3.1)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xp+1.0:\xp+3.85, ultra thick, green!50!black] {\fam}
  }
}

\begin{comment}
\begin{tikzpicture}
  \draw
    (3,-1) coordinate (a) node[right] {a}
    -- (0,0) coordinate (b) node[left] {b}
    -- (2,2) coordinate (c) node[above right] {c}
    pic["$\alpha$", draw=orange, <->, angle eccentricity=1.2, angle radius=1cm]
    {angle=a--b--c};
\end{tikzpicture}
\end{comment}

\newcommand{\continuitasincosa}{%
  \def \fa{sqrt(36-x**2)}
%   \def \fa{-sqrt(1-x**2}
  \def \fam{x-4}
  \def \mix{0}
  \def \max{5}
  \def \miy{0}
  \def \may{5}
  \def \pp{(25:\max)}
  \def \pq{(45:\max)}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{white}
    %\begin{scope}
      \clip (\mix-0.3, \miy-0.3) rectangle (\max+0.3, \may+0.3);
      \draw [thick, green!50!black] (0, 0) circle (\max);
    \%end{scope}
    \draw (0, 0) -- \pp coordinate (p) node [right] 
      {\footnotesize\(P\)} 
                        node [right, yshift=12] {\footnotesize\(\Delta y\)}
          (0, 0) -- \pq coordinate (q) node [above, xshift=-3] 
      {\footnotesize\(Q\)} 
                        node [above, xshift=12] {\footnotesize\(\Delta x\)};
    \draw (p) -- (q) (p) |- (q);
    \draw (1, 0) coordinate (a) (0,0) coordinate (o)
      pic["\footnotesize$\theta$", draw=orange, ->, 
          angle eccentricity=1.2, angle radius=10mm]
      {angle=a--o--p}
      pic["\footnotesize$\Delta$", draw=orange, ->, 
          angle eccentricity=1.2, angle radius=12mm]
      {angle=p--o--q};
  }
}

\newcommand{\continuitasincosb}{%
  \def \fa{sqrt(36-x**2)}
  \def \fam{-2.1*x+17}
  \def \mix{0}
  \def \max{5}
  \def \miy{0}
  \def \may{5}
  \def \pp{(25:\max)}
  \def \pm{(6.44, 3.5)}
  \def \qm{(5.48, 5.5)}
  \def \ppm{(6.44-0.6*2.1, 3.5-0.6)}
  \def \qqm{(5.48-0.65*2.1, 5.5-0.65)}
%   \def \xpm{6.44}
%   \def \ypm{3.5}
%   \def \xqm{5.48}
%   \def \yqm{5.5}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{white}
    %\begin{scope}
      \clip (\mix-0.3, \miy-0.3) rectangle (\max+3.2, \may+1.7);
      \draw [thick, green!50!black] (0, 0) circle (\max);
    \draw (0, 0) -- \pp coordinate (p) node [right] 
      {\footnotesize\(P \approx Q\)}; 
    \draw (1, 0) coordinate (a) (0,0) coordinate (o)
      pic["\footnotesize$\theta$", draw=orange, ->, 
          angle eccentricity=1.2, angle radius=10mm]
      {angle=a--o--p};
    \microscopio{(p)}{1}{55}{-120}{2}{(+4.1, +6.1)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=5.07:6.78, ultra thick, green!50!black] {\fam}
    \filldraw [green!50!black]
      \pm circle (1.5pt) 
          node [right, black] {\footnotesize\(P\)}
          node [right, black, yshift=15] {\footnotesize\(d y\)}
      \qm circle (1.5pt) 
          node [above, black] {\footnotesize\(Q\)}
          node [above, black, xshift=12] {\footnotesize\(d x\)}
      (5.4, 4.4) node [black] {\footnotesize\(\delta\)};
    \draw \pm |- \qm \pm -- \ppm \qm -- \qqm;
    %\end{scope}
  }
}

\newcommand{\continuitafespa}{%
  \def \fa{exp(x)}
  \def \fb{1+x}
  \def \fam{x+4.1}
  \def \mix{-3}
  \def \max{+2}
  \def \miy{0}
  \def \may{3.8}
  \def \xp{0}
  \def \yp{1}
  \disegno[10]{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, red!50!black] {\fb}
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, green!50!black] {\fa}
    \node at (-2, .5) [green!50!black] {\(y=e^x\)};
    \node at (1.7, 1.7) [red!50!black] {\(y=1+x\)};
  }
}

\newcommand{\continuitafespb}{%
  \def \fa{exp(x)}
  \def \fb{1./(1-x)}
  \def \fam{x+4.1}
  \def \mix{-3}
  \def \max{+2}
  \def \miy{0}
  \def \may{3.8}
  \def \xp{0}
  \def \yp{1}
  \disegno[10]{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:0.8, ultra thick, blue!50!black] {\fb}
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, green!50!black] {\fa}
    \node at (-2.2, .8) [blue!50!black] {\(y=\dfrac{1}{1-x}\)};
    \node at (1.7, 2.5) [green!50!black] {\(y=e^x\)};
  }
}

\newcommand{\continuitafespc}{%
  \def \fa{exp(x)}
  \def \fb{1+x}
  \def \fc{1./(1-x)}
  \def \fam{x+3.0}
  \def \mix{-3}
  \def \max{+2}
  \def \miy{0}
  \def \may{3.8}
  \def \xp{0}
  \def \yp{1}
  \disegno[10]{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, red!50!black] {\fb}
    \tkzFct[domain=\mix-0.3:0.8, ultra thick, blue!50!black] {\fc}
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, green!50!black] {\fa}
    \microscopio{(\xp, \yp)}{.5}{120}{-50}{1}{(\xp-1.9, \yp+2)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xp-1.55:\xp-0.15, ultra thick, brown!50!black] {\fam}
    \draw [dashed, thin, black] (-1.9, 2.2) node [left] {\(1\)} -- 
                         (-.8, 2.2) -- (-.8, 1.2) node [below] {\(0\)};
  }
}

\newcommand{\continuitaintervallo}{%
  \def \fa{+.25*\x*\x-2*\x+4}
  \def \fb{-.25*\x*\x+2*\x}
  \def \fma{+0.75*x+5}
  \def \fmp{-0.50*x+9}
  \def \fmb{-1.25*x+15}
  \def \mix{0}
  \def \max{10}
  \def \miy{0}
  \def \may{7}
  \def \xa{2.5}
  \def \yaa{0.562}
  \def \yab{3.438}
  \def \xb{6.5}
  \def \yba{1.562}
  \def \ybb{2.438}
  \def \xp {5}
  \def \yp {3.75}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.8]
    \begin{scope} [ultra thick, green!50!black]
      \tkzFct[domain=\mix-0.3:\xa] {\fa}
      \tkzFct[domain=\xa:\xb] {\fb}
      \tkzFct[domain=\xb:\max+0.3] {\fa}
      \foreach \xp/\yp in {\xa/\yaa, \xb/\yba}{
        \filldraw [thick, fill=white] (\xp, \yp) circle(1.5pt);}
      \foreach \xp/\yp/\lab in {\xa/\yab/a, \xb/\ybb/b}{
        \draw [thick, dotted, black] (\xp, 0) -- (\xp, \may+0.3);
        \node [above, black] at (\xp, -1) {\(\lab\)};
        \filldraw [thick] (\xp, \yp) circle(1.5pt);
      }
    \end{scope}
    \microscopio{(\xa, \yab)}{1}{120}{-50}{2}{(\xa-2.4, \yab+4.6)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xa-1.7:\xa-0.1, ultra thick, green!50!black] {\fma}
    \microscopio{(\xp, \yp)}{1}{60}{-80}{2}{(\xp+2.4, \yp+4.1)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xp-1.75:\xp+1.83, ultra thick, green!50!black] {\fmp}
    \microscopio{(\xb, \ybb)}{1}{30}{-130}{2}{(\xb+3.3, \ybb+4.1)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xb+0.73:\xb+2.0, ultra thick, green!50!black] {\fmb}
      \foreach \xp/\yp in {.8/5.6, 8.5/4.375}{
        \filldraw [thick, green!50!black] (\xp, \yp) circle(1.5pt);}
  }
}

\newcommand{\continuitaintervalli}{%
  \def \fa{.5*\x+1.5}
  \def \fb{-.5*\x*\x+4*\x-2}
  \def \fc{1./(\x-\xc)}
  \def \mix{0}
  \def \max{10}
  \def \miy{0}
  \def \may{7}
  \def \xa{0.3}
  \def \xb{2.8}
  \def \xc{5.4}
  \def \xd{8.8}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope} [ultra thick, green!50!black]
      \tkzFct[domain=\mix-0.3:\xb] {\fa}
      \tkzFct[domain=\xb:\xc] {\fb}
      \tkzFct[domain=\xc+.1:\max+0.3] {\fc}
    \filldraw [thick, fill=white] (\xb, 2.9) circle(1.5pt);
    \foreach \xp/\yp/\lab in {\xa/1.65/a, \xb/5.28/b, 
                              \xc/5.02/c, \xd/.294/d}{
      \draw [thick, dotted, black] (\xp, 0) -- (\xp, \may+0.3);
      \node [above, black] at (\xp, -1) {\(\lab\)};
      \filldraw [thick] (\xp, \yp) circle(1.5pt);
    }
    \end{scope}
  }
}

\newcommand{\continuitaintervalloese}{%
  \def \fa{(x-1)/(x-5)}
  \def \mix{-2}
  \def \max{+10}
  \def \miy{-3}
  \def \may{+7}
  \def \xa{-1.5}
  \def \xb{+2.5}
  \def \xc{+3.5}
  \def \xd{+7.5}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope} [ultra thick, green!50!black]
      \tkzFct[domain=\mix-0.3:5] {\fa}
      \tkzFct[domain=5:\max+0.3] {\fa}
    \end{scope}
%     \filldraw [thick, fill=white] (\xb, 2.9) circle(1.5pt);
    \foreach \xp/\yp/\lab in {\xa/1.65/a, \xb/5.28/b, 
                              \xc/5.02/c, \xd/.294/d}{
      \draw [thick, dotted, black] (\xp, \miy-0.3) -- (\xp, \may+0.3);
      \node [above, black] at (\xp, -1) {\(\lab\)};
%       \filldraw [thick] (\xp, \yp) circle(1.5pt);
    }
  }
}

\newcommand{\limitigraficoa}{% 
  \def \fa{(x**2-6*x+5)/(x**2+2*x-3)}
  \def \mix{-12}
  \def \max{+10}
  \def \miy{-10}
  \def \may{+10}
  \disegno[2.8]{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \tkzFct[domain=\mix-0.3:-3.1, ultra thick, color=orange!50!black] {\fa}
    \tkzFct[domain=-2.9:\max+0.3, ultra thick, color=orange!50!black] {\fa}
  }
}

% \newcommand{\limitigraficoa}{% 
%   \def \funzione{(x**2-6*x+5)/(x**2+2*x-3)}
%   \disegno{
%     \rcom{-18}{+15}{-10}{+10}{gray!50, very thin, step=1}
%     \tkzInit[xmin=-18.3,xmax=+15.3,ymin=-10.3,ymax=+10.3]
%     \tkzFct[domain=-18.3:-3.1, ultra thick, color=orange!50!black]
%          {\funzione}
%     \tkzFct[domain=-2.9:+15.3, ultra thick, color=orange!50!black]
%          {\funzione}
%   }
% }

\newcommand{\limitigraficob}{% 
  \def \funzione{(x**2-6*x+5)/(x**2+2*x-3)}
  \disegno{
    \rcom{-3}{+3}{-3}{+3}{gray!50, very thin, step=1}
    \tkzInit[xmin=-3.3,xmax=+3.3,ymin=-3.3,ymax=+3.3]
    \tkzFct[domain=-2.9:+0.91, ultra thick, color=orange!50!black]
         {\funzione}
    \tkzFct[domain=+1.1:+3.3, ultra thick, color=orange!50!black]
         {\funzione}
    \draw [orange!50!black] (1, -1) circle (2pt);
  }
}

\newcommand{\limitefinitodef}{%
  \def \fa{+.25*\x*\x-0.25*\x+0}
  \def \fb{+.25*\x*\x-2*\x+6}
  \def \fma{+0.75*x-3}
  \def \fmba{+2.*x-2.5}
  \def \fmbb{+0.25*x-1.5}
  \def \mix{-1}
  \def \max{9}
  \def \miy{-2}
  \def \may{7}
  \def \xa{2.}
  \def \ya{0.5}
  \def \xb{4.5}
  \def \yba{3.938}
  \def \ybb{2.062}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-1.8,ymax=\may+1.3]
    \begin{scope} [ultra thick, orange!50!black]
      \tkzFct[domain=\mix-0.3:\xb] {\fa}
      \tkzFct[domain=\xb:\max+0.3] {\fb}
      \foreach \xp/\yp in {\xa/\ya, \xb/\yba, \xb/\ybb}{
        \filldraw [thick, fill=white] (\xp, \yp) circle(1.5pt);}
      \foreach \xp/\yp/\labx/\laby in {\xa/\ya/a/L, 
                                       \xb/\yba/b/M}{
        \draw [thick, dotted, black] (0, \yp) 
          node [left] {\(\laby\)} -- (\xp, \yp) -- (\xp, 0)
          node [below] {\(\labx\)};}
      \draw [thick, dotted, black] (0, \ybb) 
        node [left] {\(N\)} -- (\xb, \ybb);
    \end{scope}
    \microscopio{(\xa, \ya)}{1}{-130}{75}{2}{(\xa-3.0, \ya-4.3)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xa-2.67:\xa+0.53, ultra thick, orange!50!black] {\fma}
    \microscopio{(\xb, \yba)}{.7}{80}{-85}{2}{(\xb+2.0, \yba+4.2)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xb-0.85:\xb, ultra thick, orange!50!black] {\fmba}
    \microscopio{(\xb, \ybb)}{1}{-50}{145}{2}{(\xb+4., \ybb-3.8)}
                {\footnotesize \(\times \infty\)}
    \tkzFct[domain=\xb+2:\xb+4.2, ultra thick, orange!50!black] {\fmbb}
      \foreach \xp/\yp/\lab in {.8/-2.4/{\tonda{a;~L}}, 
                                \xb/6.5/{\tonda{b;~M}}, 
                                \xb+2/+.125/{\tonda{b;~N}}}{
        \filldraw [thick, orange!50!black, fill=white] 
          (\xp, \yp) circle(1.5pt) node [above] {\(\lab\)};}
  }
}

\newcommand{\limitenea}{% 
  \def \fa{0.5*x - 0.5}
  \def \fam{0.5*x + 2.5}
  \def \mix{-2}
  \def \max{+8}
  \def \miy{-2}
  \def \may{+5}
  \def \xp{4}
  \def \yp{1.5}
  \def \xpm{2}
  \def \ypm{3.5}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope}[ultra thick, orange!50!black] 
      \tkzFct[domain=\mix-0.3:\max+0.3] {\fa}
      \filldraw [opacity=.3] (\xp, \yp) circle (1.5pt);
    \end{scope}
    \draw [thick, dotted, black] (\xp, \yp) -- (\xp, 0)
      node [below] {\(c\)};
    \microscopio{(\xp, \yp)}{1}{110}{-40}{2}{(\xp-0.2, \yp+4.0)}
                {\footnotesize \(\times \infty\)}
    \begin{scope}[ultra thick, orange!50!black] 
      \tkzFct[domain=\xp-3.55:\xp-3] {\fam}
      \tkzFct[domain=\xp-2.5:\xp-2.3] {\fam}
      \tkzFct[domain=\xp-1.5:\xp-0.05] {\fam}
    \end{scope}
      \filldraw [orange!50!black](\xpm, \ypm) circle (1.5pt);
  }
}

\newcommand{\limiteneb}{% 
  \def \fa{sqrt(-10./x**2 + 1)}
  \def \fama{-3*x - 11}
  \def \famb{+3*x - 11}
  \def \mix{-5}
  \def \max{+5}
  \def \miy{-5}
  \def \may{+2}
  \def \xca{-3.15}
  \def \xcb{+3.15}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope} [orange!50!black]
      \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, samples=1000] {\fa}
      \filldraw (\xca, 0) circle (1.5pt) node [above right=-.3] {\(c_1\)};
      \filldraw (\xcb, 0) circle (1.5pt) node [above left=-.3] {\(c_2\)};
    \end{scope}
    \microscopio{(\xca, 0)}{1}{-100}{+110}{2}{(\xca-1.2, 0-4.7)}
                {\footnotesize \(\times \infty\)}
    \microscopio{(\xcb, 0)}{.9}{-100}{+80}{2}{(\xcb+1.2, 0-4.7)}
                {\footnotesize \(\times \infty\)}
    \begin{scope}[orange!50!black] 
      \tkzFct[domain=\xca-.18:\xca+.45, ultra thick] {\fama}
      \filldraw (\xca+.47, -3) circle (1.5pt);
      \tkzFct[domain=\xcb-.45:\xcb+.18, ultra thick] {\famb}
      \filldraw (\xcb-.47, -3) circle (1.5pt);
    \end{scope}
  }
}

\newcommand{\limitesqrt}{% 
  \def \fa{sqrt(3*x - 12)}
  \def \fama{-3*x - 11}
  \def \famb{+3*x - 11}
  \def \mix{-0}
  \def \max{+10}
  \def \miy{0}
  \def \may{+5}
  \def \xp{4}
  \def \yp{0}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope} [ultra thick, orange!50!black]
      \tkzFct[domain=\mix-0.3:\max+0.3, samples=1000] {\fa}
      \draw (\xp, \yp) -- (\xp+.015, \yp+.2);
%       \filldraw (\xcb, 0) circle (1.5pt) node [above left=-.3] {\(c_2\)};
    \end{scope}
%     \microscopio{(\xca, 0)}{1}{-100}{+110}{2}{(\xca-1.2, 0-4.7)}
%                 {\footnotesize \(\times \infty\)}
%     \microscopio{(\xcb, 0)}{.9}{-100}{+80}{2}{(\xcb+1.2, 0-4.7)}
%                 {\footnotesize \(\times \infty\)}
%     \begin{scope}[orange!50!black] 
%       \tkzFct[domain=\xca-.18:\xca+.45, ultra thick] {\fama}
%       \filldraw (\xca+.47, -3) circle (1.5pt);
%       \tkzFct[domain=\xcb-.45:\xcb+.18, ultra thick] {\famb}
%       \filldraw (\xcb-.47, -3) circle (1.5pt);
%     \end{scope}
  }
}

\newcommand{\limiteiesea}{% 
  \def \fa{(x+2)/((x**2 +10*x +25))}
%   \def \fama{-3*x - 11}
%   \def \famb{+3*x - 11}
  \def \mix{-10}
  \def \max{+2}
  \def \miy{-12}
  \def \may{+2}
  \def \xp{-5}
  \def \yp{0}
  \def \xta{-5}
  \def \yta{-.5}
  \def \xmica{-3.5}
  \def \ymica{+2}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope} [ultra thick, orange!50!black]
      \tkzFct[domain=\mix-0.3:\xp-0.1] {\fa}
      \tkzFct[domain=\xp+0.1:\max+0.3] {\fa}
    \end{scope}
    \draw (\xta, \yta) pic [rotate=-90, xscale=.5, yscale=.5, black] 
      {telescopio=\(\infty\)};
    \microscopio{(\xta, \yta)}{1}{+60}{-120}{2}{(0, 0)}{}
    \draw [ultra thick, orange!50!black] (\xta+1.5, \yta+4.61) 
      node [black, above] {\(-5\)} -- (\xta+1.5, \yta+0.61);
    \microscopio{(\xmica, \ymica)}{1}{+150}{+0}{2}{(-8.2, 4.2)}
      {\(\times \infty\)}
    \draw [dashed, black] (\xmica-3, \ymica+2.45) 
      node [black, above] {\(-5\)} -- (\xmica-3, \ymica-1.5);
    \draw [ultra thick, orange!50!black] 
      (\xmica-3.3, \ymica+2.45) -- (\xmica-3.3, \ymica-1.45)
      (\xmica-2.7, \ymica+2.45) -- (\xmica-2.7, \ymica-1.45);
  }
}

\newcommand{\limiteieseb}{% 
  \def \fa{(-2*x +6)/((x -4))}
%   \def \fama{-3*x - 11}
%   \def \famb{+3*x - 11}
  \def \mix{-4}
  \def \max{+10}
  \def \miy{-7}
  \def \may{+6}
  \def \xa{+4}
  \def \xta{+4}
  \def \yta{-1.5}
  \def \xmica{+6.5}
  \def \ymica{0}
  \def \xtb{+4}
  \def \ytb{+1.5}
  \def \xmicb{+1}
  \def \ymicb{+1.5}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope} [ultra thick, orange!50!black]
      \tkzFct[domain=\mix-0.3:\xa-0.1] {\fa}
      \tkzFct[domain=\xa+0.1:\max+0.3] {\fa}
    \end{scope}
    \draw (\xta, \yta) pic [rotate=-90, scale=.5, black] 
      {telescopio=\(\infty\)};
    \microscopio{(\xta, \yta)}{1}{+20}{-150}{2}{(0, 0)}{}
    \draw [ultra thick, orange!50!black] (\xmica, \ymica+1.85) 
      node [black, above] {\(+4\)} -- (\xmica, \ymica-2.15);
    \microscopio{(\xmica, \ymica)}{1}{-20}{+180}{2}{(11., 1.6)}
      {\(\times \infty\)}
    \draw [dashed, black] (\xmica+3, \ymica+1.65) 
      node [black, above] {\(+4\)} -- (\xmica+3, \ymica-2.25);
    \draw [ultra thick, orange!50!black] 
      (\xmica+3.3, \ymica+1.65) -- (\xmica+3.3, \ymica-2.25);
    \draw (\xtb, \ytb) pic [rotate=+90, xscale=.5, yscale=.5, black] 
      {telescopio=\(\infty\)};
    \microscopio{(\xtb, \ytb)}{1}{+200}{-10}{2}{(0, 0)}{}
    \draw [ultra thick, orange!50!black] (\xmicb, \ymicb+2) 
      node [black, above] {\(+4\)} -- (\xmicb, \ymicb-2.0);
    \microscopio{(\xmicb, \ymicb)}{1}{+180}{+0}{2}{(-3.7, 3.4)}
       {\(\times \infty\)}
    \draw [dashed, black] (\xmicb-3, \ymicb+2.) 
      node [black, above] {\(+4\)} -- (\xmicb-3, \ymicb-2);
    \draw [ultra thick, orange!50!black] 
      (\xmicb-3.3, \ymicb+2.) -- (\xmicb-3.3, \ymicb-2);
  }
}

% % Old:
% \newcommand{\limiteiesea}{% 
%   \def \fa{(x+2)/((x**2 +8*x +16))}
% %   \def \fama{-3*x - 11}
% %   \def \famb{+3*x - 11}
%   \def \mix{-8}
%   \def \max{+2}
%   \def \miy{-12}
%   \def \may{+2}
%   \def \xp{-4}
%   \def \yp{0}
%   \disegno{
%     \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
%     \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
%     \begin{scope} [ultra thick, orange!50!black]
%       \tkzFct[domain=\mix-0.3:\xp-0.1] {\fa}
%       \tkzFct[domain=\xp+0.1:\max+0.3] {\fa}
%     \end{scope}
%   }
% }

\newcommand{\limitesinunosux}{% 
  \def \fa{sin(5./x)}
%   \def \fa{sqrt(sin(5./x))}
  \def \mix{-6}
  \def \max{+6}
  \def \miy{-1}
  \def \may{+1}
  \def \da{0.4}
  \def \db{0.03}
  \disegno[10]{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
    \begin{scope} [thin, orange!50!black]
      \tkzFct[domain=\mix-0.3:-\da, samples=100, smooth] {\fa}
      \tkzFct[domain=-\da:-\db, samples=1000, smooth] {\fa}
      \tkzFct[domain=+\db:+\da, samples=1000, smooth] {\fa}
      \tkzFct[domain=+\da:\max+0.3, samples=100, smooth] {\fa}
      \filldraw [ultra thick] (-\db, -0.99) rectangle (+\db, +0.99);
    \end{scope}
    \node at (-3.5, +0.5) {\(y = \sen \dfrac{5}{x}\)};
  }
}

\newcommand{\limiteallinfinito}{% 
  \def \fa{(3*x**2-4*x+5)/(x**2-2*x+3)}
%   \def \fa{sqrt(sin(5./x))}
  \def \mix{-10}
  \def \max{+10}
  \def \miy{-3}
  \def \may{+5}
  \def \xta{-3}
  \def \yta{3}
  \def \xtb{3}
  \def \ytb{2}
  \def \xmica{-3}
  \def \ymica{.3}
  \def \xmicb{+3}
  \def \ymicb{-.5}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{gray!50, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
      \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, orange!50!black] {\fa}
    \draw (\xta, \yta) pic [rotate=180, xscale=.5, yscale=.5] 
      {telescopio=\(M\)};
    \microscopio{(\xta, \yta)}{1}{-90}{90}{2}{(0, 0)}{}
    \draw [ultra thick, orange!50!black] (\xta-1.97, \ymica) 
      node [black, left] {\(3\)} -- (\xta+1.97, \ymica);
    \microscopio{(\xmica, \ymica)}{1}{-120}{60}{2}{(\xmica+0.1, \ymica-4.5)}
      {\footnotesize \(\times \infty\)}
    \draw [dashed, black] (\xmica-3.47, \ymica-2.4) 
      node [black, left] {\(3\)} -- (\xmica+0.48, \ymica-2.4);
    \draw [ultra thick, orange!50!black] 
      (\xmica-3.47, \ymica-2.8) -- (\xmica+0.48, \ymica-2.8);
    \draw (\xtb, \ytb) pic [rotate=0, , xscale=.5, yscale=-.5] 
      {telescopio=\(M\)};
    \microscopio{(\xtb, \ytb)}{0.5}{-90}{90}{2}{(0, 0)}{}
    \draw [ultra thick, orange!50!black] (+1, \ymicb) -- (+5, \ymicb) 
      node [black, right] {\(3\)};
    \microscopio{(\xmicb, \ymicb)}{1}{-60}{120}{2}{(\xmicb+0.0, \ymicb-4.5)}
      {\footnotesize \(\times \infty\)}
    \draw [ultra thick, orange!50!black] 
      (\xmicb-0.48, \ymicb-2.4) -- (\xmicb+3.48, \ymicb-2.4);
    \draw [dashed, black] (\xmicb-0.48, \ymicb-2.8) 
      node [black, left] {\(3\)} -- (\xmicb+3.48, \ymicb-2.8);
  }
}

\newcommand{\limmicx}[8]{% 
  % interno del microscopio posto sull'asse x.
  \def \xa{#1} \def \xb{#2} \def \xc{#3} \def \xd{#4}
  \def \ya{#5} \def \yb{#6} \def \yc{#7}
  \def \lab{#8}
  \draw (\xa, \ya) -- (\xd, \ya);
  \draw (\xa, \ya) -- (\xd, \ya);
  \draw [Green!50!black, ultra thick] (\xc, \yb) -- (\xb, \yb);
  \draw [brown!50!black, ultra thick] (\xb, \ya) node [below] {\lab} -- 
                                       (\xb, \yb);
  \draw (\xb, \yb) -- (\xb, \yc);
}

\newcommand{\limiteseno}{% 
\disegno[20]{
  \rcom{-1.0}{+1.0}{-1.0}{+1.0}{gray!50, very thin, step=1}
  \draw [brown!50!black, ultra thick] (0, 0) circle (1);
  \draw [Green!50!black, ultra thick] (0, 0) -- (1.45, 0);
  \microscopio{(1, 0)}{.3}{40}{230}{.5}{(1.8, 1.2)}{\(\times \infty\)}
  \limmicx{1.14}{1.6}{1.07}{1.97}{.3}{.7}{1.08}{1}
  \draw (1.7, .5) node {$\delta$};
  \microscopio{(0, 0)}{.3}{120}{320}{.5}{(-.8, 1.2)}{\(\times  \infty\)}
  \limmicx{-0.12}{-0.5}{-0.05}{-0.95}{.3}{.7}{1.08}{0}
  \draw (-0.75, .5) node {$\sen \delta$};
  }
}

\newcommand{\sinusoide}{%
\disegno[5]{
  \rcom{-6.5}{+6.5}{-1.0}{+1.0}{gray!50, very thin, step=1}
    \tkzInit[xmin=-6.8,xmax=+6.8,ymin=-1.3,ymax=+1.3]
    \tkzFct[domain=-6.8:+6.8, ultra thick, color=Blue!50!black]
         {sin(x)}
    \node at (0, -1.8) {$y=\sen x$};
  }
}

\newcommand{\cosinusoide}{%
\disegno[5]{
  \rcom{-6.5}{+6.5}{-1.0}{+1.0}{gray!50, very thin, step=1}
    \tkzInit[xmin=-6.8,xmax=+6.8,ymin=-1.3,ymax=+1.3]
    \tkzFct[domain=-6.8:+6.8, ultra thick, color=Red!50!black]
         {cos(x)}
    \node at (0, -1.8) {$y=\cos x$};
  }
}

\newcommand{\tangentoide}{%
\disegno[5]{
  \rcom{-3.5}{+3.5}{-4.0}{+4.0}{gray!50, very thin, step=1}
    \tkzInit[xmin=-3.8,xmax=+3.8,ymin=-4.3,ymax=+4.3]
    \tkzFct[domain=-3.8:-1.8, ultra thick, color=Green!50!black]
         {tan(x)}
    \tkzFct[domain=-1.4:+1.4, ultra thick, color=Green!50!black]
         {tan(x)}
    \tkzFct[domain=+1.6:+3.8, ultra thick, color=Green!50!black]
         {tan(x)}
    \node at (0, -4.8) {$y=\tan x$};
  }
}

% \newcommand{\gnomino}[6]{
%   % example:
%   % \disegno{\gnomino{\xc}{\yc}{c}{L}{black}{black}}
%   \def \x{#1}
%   \def \y{#2}
%   \def \lx{#3}
%   \def \ly{#4}
%   \def \colorlx{#5}
%   \def \colorly{#6}
%     \draw [thin, dashed, black] 
%           (0, \y) node [left, \colorly] {\footnotesize \(\ly\)} -- 
%           (\x, \y) -- (\x, 0) 
%           node [below, \colorlx] {\footnotesize \(\lx\)};
% }

\newcommand{\taccax}[3]{
  % example:
  % \disegno{\taccay{-.2}{\yca}{L - \epsilon}}
  \def \x{#1}
  \def \y{#2}
  \def \lx{#3}
  \draw (\x, \y) node [below, black] {\footnotesize \(\lx\)} -- (\x, 0); 
}

\newcommand{\frecciax}[3]{
  % example:
  % \disegno{}
  \def \pp{#1}
  \def \pa{#2}
  \def \lx{#3}
  \draw [-{Latex[length=2mm, width=1mm]}, black] \pp 
    node[below]{\footnotesize \(\lx\)} -- \pa; 
}

\newcommand{\taccay}[3]{
  % example:
  % \disegno{\taccay{-.2}{\yca}{L - \epsilon}}
  \def \x{#1}
  \def \y{#2}
  \def \ly{#3}
  \draw [left, black]  (\x, \y) node{\footnotesize \(\ly\)} -- (0, \y); 
}

\newcommand{\frecciay}[3]{
  % example:
  % \disegno{\frecciay{(-.7, 5+.5)}{(0, 5)}{f(c-\delta)}}
  \def \pp{#1}
  \def \pa{#2}
  \def \ly{#3}
  \draw [-{Latex[length=2mm, width=1mm]}, black]  \pp 
    node[left]{\footnotesize \(\ly\)} -- \pa; 
}

\newcommand{\limiteedfin}{%
  \def \fa{-.1*(x**3-7*x**2-6*x-8)}
  \def \mix{0}
  \def \max{10}
  \def \miy{0}
  \def \may{10}
  \def \xca{2.2}
  \def \xcaa{2.5}
  \def \xc{3}
  \def \xcbb{3.5}
  \def \xcb{3.8}
  \def \yca{4.7}
  \def \ycaa{5.11}
  \def \yc{6.2}
  \def \ycbb{7.19}
  \def \ycb{7.7}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{white, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
%     \gnomino{\xc}{\yc}{c}{L}{black}{black}
    \fill [blue, opacity=.2] (0, 4.7) -- (2.316, 4.7) -- (3, 6.2) --
                              (3.8, 7.7) -- (0, 7.7); 
    \fill [red, opacity=.3] (0, \ycaa) -- (2.5, \ycaa) -- (2.5, 0) --
                               (3.5, 0) -- (3.5, \ycbb) -- (0, \ycbb); 
    \filldraw (\xc, \yc) [orange!50!black, fill=white] circle(1.5pt);
    \frecciay{(-.5, \yca-.5)}{(0, \yca)}{L - \epsilon}
    \frecciay{(-.7, \ycaa)}{(0, \ycaa)}{f(c-\delta)}
    \taccay{-.2}{\yc}{L}
    \frecciay{(-.7, \ycbb)}{(0, \ycbb)}{f(c+\delta)}
    \frecciay{(-.5, \ycb+.5)}{(0, \ycb)}{L + \epsilon}
    \frecciax{(\xcaa-.5, -.5)}{(\xcaa, 0)}{c - \delta}
    \taccax{\xc}{-.2}{c}
    \frecciax{(\xcbb+.5, -.5)}{(\xcbb, 0)}{c + \delta}
    \tkzFct[domain=\mix-0.3:\max+0.3, ultra thick, orange!50!black] {\fa}
  }
}

\newcommand{\limiteedinf}{% 
  \def \fa{1/(x - 3)**2}
  \def \mix{0}
  \def \max{10}
  \def \miy{0}
  \def \may{10}
  \def \xcaa{2.68}
  \def \xc{3}
  \def \xcbb{3.32}
  \def \yc{6}
  \def \ycaa{8.00}
  \disegno{
    \rcom{\mix}{\max}{\miy}{\may}{white, very thin, step=1}
    \tkzInit[xmin=\mix-0.3,xmax=\max+0.3,ymin=\miy-0.3,ymax=\may+0.3]
%     \fill [blue, opacity=.2] 
%       (0, \yc) -- (\max+.3, \yc) -- (\max+.3, \may+.3) -- (0, \may+.3); 
    \fill [blue, opacity=.2] 
      (0, \ycaa) -- (\max+.3, \ycaa) -- (\max+.3, \may+.3) -- (0, \may+.3); 
    \fill [blue, opacity=.2] 
      (0, \yc) -- (\xcaa, \yc) -- (\xcaa, \ycaa) -- (0, \ycaa); 
    \fill [blue, opacity=.2] 
      (\xcbb, \yc) -- (\max+.3, \yc) -- (\max+.3, \ycaa) -- (\xcbb, \ycaa); 
    \fill [red, opacity=.3] 
      (0, \ycaa) -- (\max+.3, \ycaa) -- (\max+.3, \may+.3) -- (0, \may+.3); 
    \fill [red, opacity=.3] (\xcaa, 0) -- (\xcaa, \ycaa) -- 
                            (\xcbb, \ycaa) -- (\xcbb, 0); 
    \frecciay{(-.7, \ycaa-.4)}{(0, \ycaa)}{f(c-\delta)}
    \taccay{-.2}{\yc}{M}
    \frecciay{(-.7, \ycaa+.4)}{(0, \ycaa)}{f(c+\delta)}
    \frecciax{(\xcaa-.5, -.5)}{(\xcaa, 0)}{c - \delta}
    \taccax{\xc}{-.2}{c}
    \frecciax{(\xcbb+.5, -.5)}{(\xcbb, 0)}{c + \delta}
    \tkzFct[domain=\mix-0.3:2.8, ultra thick, orange!50!black] {\fa}
    \tkzFct[domain=3.2:\max+0.3, ultra thick, orange!50!black] {\fa}
  }
}

\newcommand{\continuitagraficoese}{%7
  \disegno{
    \rcom{-12}{+12}{-7}{+7}{gray!50, very thin, step=1}
    \tkzInit[xmin=-12.3,xmax=+12.3,ymin=-7.3,ymax=+7.3]
    \tkzFct[domain=-12.3:-2.1, ultra thick, color=brown!50!black]
         {x/(x + 2)-2}
    \tkzFct[domain=-1.9:+0.9, ultra thick, color=brown!50!black]
         {x/(x + 2)-2}
    \tkzFct[domain=1:+3.95, ultra thick, color=brown!50!black]
         {x**2-6*x+7}
    \tkzFct[domain=+4.05:5, ultra thick, color=brown!50!black]
         {x**2-6*x+7}
    \tkzFct[domain=+5:12.3, ultra thick, color=brown!50!black]
         {1/(x-4)+1}
    \filldraw [brown!50!black] (1, 2) circle (2pt);
    \draw [brown!50!black] (1, -1.7) circle (2pt);
    \draw [brown!50!black] (4, -1) circle (2pt);
  }
}

\newcommand{\polregincirc}[2]{% 
  % Poligono regolare inscritto e circoscritto.
  \def \ra{#1}
  \def \nlati{#2}
  \pgfmathparse{\ra / cos(deg(pi / \nlati))} \let\rb\pgfmathresult
  \pgfmathparse{360. / \nlati} \let\ang\pgfmathresult
  \draw [thick, orange!50!black] circle(\ra);
%   \draw (0:\ra) \foreach \x in {60,120,...,359} {-- (\x:\ra)} -- cycle;
  \draw [thick, blue!50!black] 
    (0:\ra) \foreach \x in {1,...,\nlati} {-- (\x*\ang:\ra)} -- cycle;
  \draw [thick, green!50!black] 
    (0:\rb) \foreach \x in {1,...,\nlati} {-- (\x*\ang:\rb)} -- cycle;
}

% \newcommand{\pigrecoa}{% 
%   % Approsimazioni di pigreco esagono e dodecagono.
%   \disegno{\polregincirc{5}{6}}
% }
% 
% \newcommand{\pigrecob}{% 
%   % Approsimazioni di pigreco esagono e dodecagono.
%   \disegno{\polregincirc{5}{12}}
% }

\newcommand{\agnesia}{% 
  % Approsimazioni di pigreco esagono e dodecagono.
  \def \ra{7}
  \def \ang{25}
  \def \rang{2}
  \disegno{
    \rcom{-8}{+8}{-1}{+8}{gray!50, very thin, step=20}
    \pgfmathparse{\ra * cos(\ang)} \let\cosang\pgfmathresult
    \pgfmathparse{\ra * sin(\ang)} \let\sinang\pgfmathresult
    \pgfmathparse{\ra * tan(\ang)} \let\tanang\pgfmathresult
    \begin{scope}[thick]
      \draw (\ra, 0) arc(0:180:\ra);
      \draw (\rang, 0) arc(0:\ang:\rang);
      \node at (\ang/2:\rang) [right] {\(\delta\)};
      \path[draw] (0, 0) coordinate [label=below left:\(A\)] (A)
        (180:\ra) coordinate [label=below:\(G\)] (G)
        -- (0:\ra) coordinate [label=below:\(C\)] (C)
        -- (\ang:\ra) coordinate [label=above:\(D\)] (D)
        -- cycle
        (0, 0) -- (D);
      \begin{scope} [dashed]
      \path[draw]
        (D) -- (\cosang, 0) coordinate [label=below:\(B\)] (B);
      %  (D) -- (\ra, \sinang) coordinate [label=right:\(F\)] (B)
       % (D) -- (\ra, \tanang) coordinate [label=above right:\(E\)] (E)
       % (E) -- (C);
      \end{scope}
    \end{scope}
  }
}

