% (c) 2017 Daniele Zambelli - daniele.zambelli@gmail.com
% 
% Tutti i grafici per il capitolo relativo alle funzioni_new
% 

\usetikzlibrary{shapes.gates.logic.US,trees,positioning,arrows}

% \newcommand{\grafiscatola}{% 
%   % Funzione rappresentata la funzione come scatola nera
%   \disegno[10]{
%      \node [draw, fill=blue!20, minimum size=3em, rounded corners] 
%             at (0, 0) (block 1) {add};
%      \draw [->] (-1, -0.5) node [left] {$o_1$} -- (block 1);
%      \draw [->] (-1, +0.5) node [left] {$o_2$} -- (block 1);
%      \draw[->] (block 1.east) -- (1, 0) node [right] {somma};
%         
%      \node [draw, fill=blue!20, minimum size=3em, rounded corners] 
%             at (0, 2) (block 2) {add};
%      \draw [->] (1, 1.5) node [right] {$o_1$} -- (block 2);
%      \draw [->] (1, +2.5) node [right] {$o_2$} -- (block 2);
%      \draw[->] (block 2.west) -- (-1, 2) node [left] {somma};
%   }
% }

\newcommand{\scatolasommasda}{% 
  \disegno[10]{
     \node [draw, fill=blue!20, minimum size=3em, rounded corners] 
            at (0, 0) (block 1) {add};
     \draw [->] (-1, +0.5) node [left] {$o_1$} -- (block 1);
     \draw [->] (-1, -0.5) node [left] {$o_2$} -- (block 1);
     \draw[->] (block 1.east) -- (1, 0) node [right] {somma};
  }
}

\newcommand{\scatolasommadsa}{% 
  \disegno[10]{
     \node [draw, fill=blue!20, minimum size=3em, rounded corners] 
            at (0, 2) (block 2) {add};
     \draw [->] (1, +2.5) node [right] {$o_1$} -- (block 2);
     \draw [->] (1, 1.5) node [right] {$o_1$} -- (block 2);
     \draw[->] (block 2.west) -- (-1, 2) node [left] {somma};
  }
}

\newcommand{\grafoscatolasd}[4]{% 
  % Funzione binaria rappresentata come scatola nera a sinistra
  % esempio di chiamata:
  % \grafoscatolasx{add}{\(o_1\)}{\(o_2\)}{somma}
  \def \nomef{#1}
  \def \opa{#2}
  \def \opb{#3}
  \def \risultato{#4}
  \disegno[10]{
     \node [draw, fill=blue!20, minimum size=3em, rounded corners] 
            at (0, 0) (block 1) {\nomef};
     \draw [->] (-1, +0.5) node [left] {$\opa$} -- (block 1);
     \draw [->] (-1, -0.5) node [left] {$\opb$} -- (block 1);
     \draw[->] (block 1.east) -- (1, 0) node [right] {$\risultato$};
  }
}

\newcommand{\grafoscatolads}[4]{% 
  % Funzione binaria rappresentata come scatola nera a destra
  % esempio di chiamata:
  % \grafoscatoladx{add}{\7\)}{\(5\)}{\(12\)}
  \def \nomef{#1}
  \def \opa{#2}
  \def \opb{#3}
  \def \risultato{#4}
  \disegno[10]{
     \node [draw, fill=blue!20, minimum size=3em, rounded corners] 
            at (0, 2) (block 2) {\nomef};
     \draw [->] (1, +2.5) node [right] {$\opa$} -- (block 2);
     \draw [->] (1, 1.5) node [right] {$\opb$} -- (block 2);
     \draw[->] (block 2.west) -- (-1, 2) node [left] {$\risultato$};
  }
}

\begin{comment}
 You can define a new style that automates setting the start coordinate and 
drawing the arc:

\tikzset{
    partial ellipse/.style args={#1:#2:#3}{
        insert path={+ (#1:#3) arc (#1:#2:#3)}
    }
}

Then you can simply say

\draw[thick, red, -latex] (0,0) [partial ellipse=30:150:3cm and 2cm];


\begin{tikzpicture}
 
% Arc operation
\draw (2,0) arc
    [
        start angle=0,
        end angle=300,
        x radius=2cm,
        y radius =1cm
    ] ;
 
\end{tikzpicture}
 
 
 
\end{comment}


\newcommand{\grafoportad}[5][1]{% 
  % Funzione binaria rappresentata come porta logica
  % esempio di chiamata:
  % \grafoportad[3]{add}{o_1}{o_2}{somma}
  \def \dim{#1}
  \def \nomef{#2}
  \def \opa{#3}
  \def \opb{#4}
  \def \risultato{#5}
  \def \ddim{2*\dim}
  \disegno{
    \draw (0, 0) node {\nomef} (-\dim, +\dim) -- (-\dim, -\dim) 
      arc [start angle=-90, end angle=90, x radius=\ddim, y radius =\dim]
      -- cycle;
     \draw (-1.5*\dim, .5*\dim) node [left=-4pt] {$\boxed{\opa}$} -- 
       (-\dim, .5*\dim)
       (-1.5*\dim, -.5*\dim) node [left=-4pt] {$\boxed{\opb}$} -- 
       (-\dim, -.5*\dim)
       (+\dim, 0) -- (+1.5*\dim, 0) 
       node [right=-4pt] {$\boxed{\risultato}$};
  }
}

\newcommand{\grafoportas}[5][1]{% 
  % Funzione binaria rappresentata come porta logica
  % esempio di chiamata:
  % \grafoportas{add}{o_1}{o_2}{somma}
  \def \dim{#1}
  \def \nomef{#2}
  \def \opa{#3}
  \def \opb{#4}
  \def \risultato{#5}
  \def \ddim{2*\dim}
  \disegno{
    \draw (0, 0) node {\nomef} (+\dim, -\dim) -- (+\dim, +\dim) 
      arc [start angle=+90, end angle=270, x radius=\ddim, y radius =\dim]
      -- cycle;
     \draw (+1.5*\dim, .5*\dim) node [right=-4pt] {$\boxed{\opa}$} -- 
       (+\dim, .5*\dim)
       (+1.5*\dim, -.5*\dim) node [right=-4pt] {$\boxed{\opb}$} -- 
       (+\dim, -.5*\dim)
       (-\dim, 0) -- (-1.5*\dim, 0) 
       node [left=-4pt] {$\boxed{\risultato}$};
  }
}

%\newcommand{\grafoporta}{% 
%  % Funzione rappresentata come porta logica
  
% \begin{circuitikz}[rotate=-90]
% \draw (0,3) node[american and port] (A) {P1};
% \begin{scope}
% \ctikzset{tripoles/american or port/height=1.6}
% \draw (A.out) -- ++(0.5,0)
% node[american or port,
% number inputs=5,
% anchor=in 1] (B) {P2};
% \end{scope}
% \draw (0,1.5) node[american or port] (C) {P3};
% \draw (C.out) |- (B.in 2);
% \end{circuitikz}
 
%  \disegno[10]{
%    \draw (6,0) node[nand2ni,anchor=tip,draw] (n4) {}
%      (n4.z) -- +(0mm,-5mm)
%      (n4.b) |- ++(10mm,2mm) -- ++(0mm,2mm)
%      node[and2in,anchor=z,draw,fill=gray] (n3) {}
%      (n4.a) |- ++(-10mm,2mm) -- ++(0mm,2mm)
%      node[or3nni,anchor=tip,draw] (n2) {}
%      (n3.b) -- +(0mm,5mm) node[above] {$i_5$}
%      (n3.a) |- ++(-5mm,2mm)
%      coordinate (p) -- +(0mm,5mm) node[above] {$i_4$}
%      (n2.c) |- (p)
%      (n2.b) |- ++(6mm,12mm) -- +(0mm,5mm) node[above] {$i_3$}
%      (n2.a) -- +(0mm,8mm)
%      node[and2,anchor=tip,draw] (n1) {}
%      (n1.b) -- +(0mm,5mm) node[above] {$i_2$}
%      (n1.a) -- +(0mm,5mm) node[above] {$i_1$};
%  }
%}
