% (c) 2014 Daniele Zambelli - daniele.zambelli@gmail.com
% 
% Tutti i grafici per il capitolo relativo agli iperreali
%

\newcommand{\microscopioa}{% Microscopio per vedenodere 5,004.
    \disegno{
    \assecontrattini{-1.3}{+6.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1}
          (5, 0) [below] node{5};
    \microscopio{(5, 0)}{2.5}{90}{-50}{3.5}{(5.5, 8.5)}{\(\times 10^3\)}
    \segmentocontrattini{-.3}{+6}{5.5}{1}
    \draw (2.8, 5.5) [left] node [rotate=90] {5,000} 
          (3.8, 5.5) [left] node [rotate=90] {5,001}
          (0.8, 5.5) [left] node [rotate=90] {4,998};
    }
}

\newcommand{\microscopiob}{% Microscopio per vedere -3,000002.
    \disegno{
    \assecontrattini{-4.3}{+3.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1}
          (-3, 0) [below] node{-3};
    \microscopio{(-3, 0)}{2.5}{70}{-115}{3.5}{(2.5, 8.5)}{\(\times \dots\)}
    \segmentocontrattini{-3.9}{+2.5}{5.5}{1}
    }
}

\newcommand{\microscopioc}{% Microscopio per NON vedere 2 - 3 \epsilon.
    \disegno{
    \assecontrattini{-1.3}{+6.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1}
          (2, 0) [below] node{2};
    \microscopio{(2, 0)}{2.5}{60}{-100}{3.5}{(7.5, 8.5)}{\(\times 10^{27}\)}
    \draw[very thin] (3.8, 6-.1) -- (3.8, 6+0.2);
    \draw [-] (0.4, 6) -- (7.3, 6);
    \draw [-{Stealth[length=2mm, round]}] 
      (3, 5) node [below] {\(2-\epsilon\)} -- (3.8, 6);
    \draw [-{Stealth[length=2mm, round]}] 
      (5, 5) node [below] {\(2\)} -- (3.8, 6);
    }
}

\newcommand{\microscopiod}{% Microscopio per vedere 2 - 3 \epsilon.
    \disegno{
    \assecontrattini{-1.3}{+6.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1}
          (2, 0) [below] node{2};
    \microscopio{(2, 0)}{2.5}{60}{-100}{3.5}{(7.5, 8.5)}
                {\(\times \frac{1}{\epsilon}\)}
    \segmentocontrattini{.7}{7}{6}{1}
    \draw (.8, 6) [left] node [rotate=90] {\(2 - 3 \epsilon\)} 
          (2.8, 6) [left] node [rotate=90] {\(2 - \epsilon\)}
          (3.8, 6) [left] node [rotate=90] {2};
    }
}

\newcommand{\telescopioa}{% Telescopio per visualizzare 127034.
    \disegno{
    \assecontrattini{-1.3}{+6.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1};
    \draw (-1, 1) pic [rotate=0, scale=.5] {telescopio=127034};
    \microscopio{(-1, 1)}{2.5}{40}{-130}{3.5}{(7.5, 9.5)}{}
    \segmentocontrattini{0}{+6.2}{6}{1}
    \draw (1., 6) [left] node [rotate=90] {...} 
          (2., 6) [left] node [rotate=90] {127033} 
          (3., 6) [left] node [rotate=90] {127034}
          (4., 6) [left] node [rotate=90] {127035}
          (5., 6) [left] node [rotate=90] {\dots};
    }
}

\newcommand{\telescopiob}{% Telescopio per visualizzare 127034.
    \disegno{
    \assecontrattini{-1.3}{+6.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1};
    \draw (-1, 1) pic [rotate=0, scale=.5] {telescopio=\(A\)};
    \microscopio{(-1, 1)}{2.5}{40}{-130}{3.5}{(7.5, 9.5)}{}
    \segmentocontrattini{0}{+6.2}{6}{1}
    \draw (0, 6) [left] node [rotate=90] {\dots} 
          (1, 6) [left] node [rotate=90] {\(A - 1\)} 
          (2, 6) [left] node [rotate=90] {\(A ~~\quad\)}
          (3, 6) [left] node [rotate=90] {\(A + 1\)}
          (5, 6) [left] node [rotate=90] {\(A + 3\)}
          (6, 6) [left] node [rotate=90] {\dots};
    }
}

\newcommand{\grandangoloa}{% Grandangolo per vedenodere 300.
    \disegno{
    \assecontrattini{-1.3}{+6.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1};
    \grandangolo{(0, 0)}{2.5}{90}{-126}{3.5}{(5.5, 8.5)}{\(\div 100\)}
    \segmentocontrattini{-1.1}{+5.2}{6}{1}
    \draw (1.9, 6) [left] node [rotate=90] {0} 
          (2.9, 6) [left] node [rotate=90] {100}
          (4.9, 6) [left] node [rotate=90] {300};
    }
}

\newcommand{\grandangolob}{% Grandangolo per vedenodere 300.
    \disegno{
    \assecontrattini{-1.3}{+6.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1};
    \grandangolo{(0, 0)}{2.5}{90}{-126}{3.5}{(5.5, 8.5)}{\(\div A\)}
    \segmentocontrattini{-1.1}{+5.2}{6}{1}
    \draw (1.9, 6) [left] node [rotate=90] {0} 
          (2.9, 6) [left] node [rotate=90] {\(A\)}
          (-.1, 6) [left] node [rotate=90] {\(-2 A\)};
    }
}

\newcommand{\combinazione}{% Combinazione per: \(1741,998+2\epsilon\).
    \disegno{
    \assecontrattini{-1.3}{+6.3}{0}{x}
    \draw (0, 0) [below] node{0} (1, 0) [below] node{1};
    \draw (-1, 1) pic [rotate=0, scale=.5] {telescopio=1742};
    \microscopio{(-1, 1)}{2.5}{40}{-130}{3.5}{(7.5, 9.5)}{}
    \segmentocontrattini{0}{+6.2}{6}{1}
    \draw (1., 6) [left] node [rotate=90] {\dots}
          (2., 6) [left] node [rotate=90] {1741}
          (3., 6) [left] node [rotate=90] {1742}
          (4., 6) [left] node [rotate=90] {1743}
          (5., 6) [left] node [rotate=90] {\dots};
    \microscopio{(3., 6)}{2.5}{130}{-40}{3.5}{(-5.2, 12.7)}{\(\times 1000\)}
    \segmentocontrattini{-4.5}{+1.9}{10.5}{1}
    \draw (-3.5, 10.5) [left] node [rotate=90] {\dots}
          (-2.5, 10.5) [left] node [rotate=90] {1741,998}
          (-1.5, 10.5) [left] node [rotate=90] {1741,999}
          (-0.5, 10.5) [left] node [rotate=90] {1742}
          (0.5, 10.5) [left] node [rotate=90] {\dots};
    \microscopio{(-2.5, 10.5)}{2.5}{30}{-120}{3.5}{(5, 17)}
                {\(\times \frac{1}{\epsilon}\)}
    \segmentocontrattini{-1.77}{+4.6}{15}{1}
    \draw (-0.7, 15) [right] node [rotate=90] {\dots}
          (0.3, 15) [right] node [rotate=90] {1742,998}
          (1.3, 15) [right] node [rotate=90] {\(1741,998+\epsilon\)}
          (2.3, 15) [right] node [rotate=90] {\(1741,998+2\epsilon\)}
          (3.3, 15) [right] node [rotate=90] {\dots};
    }
}

\newcommand{\iperparabola}{% 
  % Chiamata pendenza
  \rcom{-1}{+10}{-1}{11}{gray!50, very thin, step=1}
  \tkzInit[xmin=-1.3,xmax=+10.3,ymin=-1.3,ymax=+11.3]
  \tkzFct[ultra thick, Maroon!50!black]{0.5*x**2-4*x+10} 
%     \tkzFct[thick, Cyan!50!black] {2*x-8}
}

\newcommand{\pendenza}{% 
  % Tangente ad una parabola nel punto (5; 4).
  \disegno[4]{
  \iperparabola
  \draw (6, 4) circle (2pt) node [below right] {\(T\)};
  \microscopio{(6, 4)}{2}{30}{200}{3}{(12, 9.2)}{\(\times \infty\)}
   \draw [ultra thick, Maroon!50!black] (8.7, 3.7) -- (11.3, 8.9);
   \draw (9.35, 5.0) -- (10.85, 5.0) -- (10.85, 8.0);
   \node at (10.3, 4.6) {\(\scriptstyle dx=\epsilon\)};
   \node at (11.6, 6.3) {\(\scriptstyle dy\)};
    }
}

\newcommand{\ipertangente}{% 
  % Tangente ad una parabola nel punto (5; 4).
  \disegno[4]{
  \iperparabola
  \tkzFct[thick, Cyan!50!black] {-2*x+8}  
  \draw (2, 4) circle (2pt) node [below left] {\(T\)};
  \microscopio{(2, 4)}{2}{30}{200}{3}{(9, 8.7)}{\(\times \infty\)}
   \draw [ultra thick, Maroon!50!black] (7, 3.1) -- (4.5, 8.3);
   \draw (6.6, 4.0) -- (6.6, 7.0) -- (5.2, 7.0);
   \node at (5.8, 7.5) {\(\scriptstyle \epsilon\)};
   \node at (8.9, 5.5) {\(\scriptstyle f(2+\epsilon)-f(2)\)};
    }
}

% \newcommand{\ipertangente}{% 
%   % Tangente ad una parabola nel punto (5; 4).
%   \disegno{
%   \rcom{-1}{+10}{-9}{11}{gray!50, very thin, step=1}
%   \intpendenza
%   \tkzInit[xmin=-1.3,xmax=+10.3,ymin=-9.3,ymax=+11.3]
%   \tkzFct[thick, Cyan!50!black] {2*x-8}  
% %     \tkzInit[xmin=-2.3,xmax=+12.3,ymin=-8.3,ymax=+12.3]
% %     \tkzFct[ultra thick, Maroon!50!black]{0.5*x**2-4*x+10} 
% %   \draw (6, 4) circle (2pt) 
% %             node [below right] {\(T\)};
% %   \microscopio{(6, 4)}{2}{30}{200}{3}{(12, 9.2)}{\(\times \infty\)}
% %    \draw [ultra thick, Maroon!50!black] (8.7, 3.7) -- (11.3, 8.9);
% %    \draw (9.35, 5.0) -- (10.85, 5.0) -- (10.85, 8.0);
% %    \node at (9.5, 4.6) {\(dx=\epsilon\)};
% %    \node at (11.4, 6.4) {\(dy\)};
%     }
% }

\begin{comment}

\newcommand{\pendenza}{% 
  % Tangente ad una parabola nel punto (5; 4).
  \disegno{
  \rcom{-2}{+10}{-8}{12}{gray!50, very thin, step=1}
  \begin{scope}
    \tkzInit[xmin=-2.3,xmax=+12.3,ymin=-8.3,ymax=+12.3]
    \tkzFct[ultra thick, Maroon!50!black]{0.5*x**2-4*x+10} 
%     \tkzFct[thick, Cyan!50!black] {2*x-8}  
  \end{scope}
  \draw (6, 4) circle (2pt) 
            node [below right] {\(T\)};
  \microscopio{(6, 4)}{2}{30}{200}{3}{(12, 9.2)}{\(\times \infty\)}
   \draw [ultra thick, Maroon!50!black] (8.7, 3.7) -- (11.3, 8.9);
   \draw (9.35, 5.0) -- (10.85, 5.0) -- (10.85, 8.0);
   \node at (10.1, 4.6) {\(\epsilon\)};
   \node at (11.4, 6.4) {\(dy\)};
    }
}

\newcommand{\espdueterzi}{% 
    % Esponenziali con basi diverse.
    \disegno{
    \rcom{-10}{+10}{-1}{10}{gray!50, very thin, step=1}
    \begin{scope}[ultra thick, color=Maroon!50!black]
      \tkzInit[xmin=-10.3,xmax=+10.3,ymin=-0.3,ymax=+10.3]
      \tkzFct[domain=-10.3:+6]{(3./2)**x}
%       \begin{scope}[color=Green!50!black]
        \tkzFct[color=Green!50!black, domain=-6:+10.3]{(2./3)**x}
%       \end{scope}
      \begin{scope}[color=Black!50!black]
        \filldraw (1, 3./2) circle (1.2pt);
        \filldraw (1, 2./3) circle (1.2pt);
      \end{scope}
%       \begin{scope}[color=Red!50!black]
        \filldraw [color=Red!50!black] (0, 1) circle (1.2pt);  
%       \end{scope}
    \end{scope}
    \begin{scope}[color=black]
      \draw (-4.1, 9.5) node{\(a < 1\)}; 
      \draw ((6.6, 9.5) node{\(a > 1\)};
    \end{scope}
    }
}

\newcommand{\logduebasi}{% 
    % Esponenziali con basi diverse.
    \disegno{
    \rcom{-1}{+10}{-10}{10}{gray!50, very thin, step=1}
    \begin{scope}[ultra thick, color=Maroon!50!black]
    \tkzInit[xmin=-1.3,xmax=+10.3,ymin=-10.3,ymax=+10.3]
    \tkzFct[domain=0:+10.3]{log(x)/log(3./2)}
    \filldraw (3./2, 1) circle (1.2pt);
    \begin{scope}[color=Green!50!black]
    \tkzFct[domain=0:+10.3]{log(x)/log(2./3)}
    \filldraw (3./2, -1) circle (1.2pt);
    \end{scope}
    \end{scope}
    \begin{scope}[color=black]
      \draw (8.5, -4.5) node{\(a < 1\)}; 
      \draw (8.5, 6.6) node{\(a > 1\)};
    \end{scope}
    }
}

\newcommand{\secRD}{% 
  % Tangente ad una parabola nel punto (5; 4).
  \disegno{
  \rcom{-10}{+10}{-1}{10}{gray!50, very thin, step=1}
  \begin{scope}[ultra thick, color=Maroon!50!black]
    \tkzInit[xmin=-10.3,xmax=+10.3,ymin=-1.3,ymax=+10.3]
    \tkzFct{0.2*x*(x+2)-x+2} 
    \tkzFct[thick, color=Cyan!50!black] {1.4*x-3}  
  \end{scope}
  \filldraw [color=Black] (5, 4) circle (2pt) node [below right] {A};
  \microscopio{(5, 4)}{3}{20}{230}{2}{(11.5, 8)}{\(\times \infty\)}
  \tkzInit[xmin=0,xmax=+10.2,ymin=0,ymax=+8.3]
  \tkzFct[ultra thick, color=Maroon!50!black, domain=7.9:10.3] {1.4*x-6}
  \tkzFct[thick, color=Cyan!50!black, domain=7.9:10.3] {1.4*x-6} 
  \fill [Cyan!50] (8.5, 5.9) -- (9.5, 7.3) -- (8.5, 7.3) -- cycle;
  \begin{scope}[color=Black]
   \filldraw  (9.5, 7.3) circle (2pt) node [right] {\(A\)}
              (8.5, 5.9) circle (2pt) node [below, xshift=+1mm] {\(P_n\)};
   \draw (9.2, 7.2) node [above, xshift=-1mm] {dx}
          node [below left, xshift=-1mm] {df(x)}; 
   \begin{scope}[dashed]
    \draw   (5, 4) -- (5, 0)  node [below] {\(x\approx x+dx\)}
            (5, 4) -- (0, 4)  node [left] {\(f(x)\approx f(x+dx)\)}
            (8.5, 5.9) -- (8.5, 4.6)   (9.5, 7.3) -- (9.5, 4.6)
            (8.5, 5.9) -- (7.15, 5.9)  (9.5, 7.3) -- (7.2, 7.3);
    \end{scope}
    \microscopio{(5, 0)}{3}{20}{230}{2}{(11.5, 3.5)}{\(\times \infty\)}
      \draw (7.1, 2) --(11, 2);
      \draw [dashed] (8.5, 4.5) -- (8.5, 2) node [below] {x}
                     (9.5, 4.5) -- (9.5, 2) node [below, xshift=2mm, 
                                               yshift=+0.7mm] {x+dx};
    \microscopio{(0, 4)}{1}{120}{250}{2}{(2.3, 8)}{\(\times \infty\)}
      \draw (1, 4.9) --(1, 8.6);
      \draw [dashed] (2, 6) -- (1, 6) node [left] {\(f(x)\)}
                     (2, 7.3) -- (1, 7.3) node [left] {f(x+dx)};
    
   \end{scope}

    }
}

% \newcommand{\logduebasi}{% 
%     % Esponenziali con basi diverse.
%     \disegno{
%     \rcom{-1}{+10}{-10}{10}{gray!50, very thin, step=1}
%     \begin{scope}[ultra thick, color=Maroon!50!black]
%     \tkzInit[xmin=-1.3,xmax=+10.3,ymin=-10.3,ymax=+10.3]
%     \tkzFct[domain=0:+10.3]{log(x)/log(3)}
%     \tkzFct[domain=0:+10.3]{log(x)/log(2)}
%     \tkzFct[domain=0:+10.3]{log(x)/log(3./2)}
%     \tkzFct[domain=0:+10.3]{log(x)/log(5./4)}
%     \foreach \pi in {(3, 1), (2, 1), (3./2, 1), (5./4, 1)}
%       \filldraw \pi circle (1.2pt);
%     \begin{scope}[color=Green!50!black]
%     \tkzFct[domain=0:+10.3]{log(x)/log(1./3)}
%     \tkzFct[domain=0:+10.3]{log(x)/log(1./2)}
%     \tkzFct[domain=0:+10.3]{log(x)/log(2./3)}
%     \tkzFct[domain=0:+10.3]{log(x)/log(4./5)}
%     \foreach \pi in {(3, -1), (2, -1), (3./2, -1), (5./4, -1)}
%       \filldraw \pi circle (1.2pt);
%     \end{scope}
%     \end{scope}
%     \begin{scope}[color=black]
%     \draw (7.5, 9.5) node{a} (9.5, 5.2) node{b} 
%           (9.5, 2.8) node{c} (9.5, 1.5) node{d}; 
%     \draw (9.5, -1.5) node{e} (9.5, -2.8) node{f} 
%           (9.5, -5.2) node{g} (7.5, -9.5) node{h};
%     \end{scope}
%     }
% }

\end{comment}
